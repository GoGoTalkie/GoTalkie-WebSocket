# GoTalkie WebSocket Chat - (After Refactor)

---

## ğŸš€ How to Run the Project

### First Time Setup

**Step 1: Install Dependencies**

```powershell
# Install Go dependencies
go mod download

# Install React dependencies
cd client
npm install
cd ..
```
--- 

## Running the Project

### Quick Run Script (Easiest Way!)

```powershell
.\run.ps1
```

Choose:
- **1** = Development Mode (Recommended for Coding)
- **2** = Production Mode 

Run it manually **2 options** :

#### Option 1: Development Mode 

This mode gives you **hot reload** - your changes appear instantly without rebuilding!

**Open 2 Terminals:**

**Terminal 1 - Backend Server:**
```powershell
go build -o .\bin\server.exe .\cmd\server\main.go
.\bin\server.exe
```

**Terminal 2 - Frontend Dev Server:**
```powershell
cd client
npm run dev
```

**Open your browser:**
- Go to: `http://localhost:3000`
- Edit files in `client/src/` â†’ Save â†’ See changes instantly! âš¡

#### Option 2: Production Mode (For Deployment)

This builds optimized files for production use.

```powershell
# Build React frontend
cd client
npm run build
cd ..

# Build Go backend
go build -o .\bin\server.exe .\cmd\server\main.go

# Run server
.\bin\server.exe
```
---

## ğŸ”„ What Changed After Refactoring

### Major Changes

| Before | After | Reason |
|--------|-------|--------|
| **HTML/CSS/JavaScript** | **React + TypeScript** | Better code organization, type safety |
| No build process | Vite build system | Fast development, optimized production |
| Manual DOM updates | React components | Automatic UI updates |
| Global variables | React state + hooks | Better state management |
| Multiple JS files | Component-based | Easier to maintain |

### File Structure Changes

**Before (Old):**
```
static/
â”œâ”€â”€ index.html              â† Single HTML file
â”œâ”€â”€ script.js               â† All JavaScript mixed together
â”œâ”€â”€ style.css               â† All CSS in one file
â””â”€â”€ js/
    â”œâ”€â”€ websocket.js
    â”œâ”€â”€ chat.js
    â”œâ”€â”€ ui.js
    â””â”€â”€ main.js
```

**After (New):**
```
client/                     â† New React app folder
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         â† Separate component files
â”‚   â”‚   â”œâ”€â”€ Login.tsx       â† Login screen
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx     â† User/group list
â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx    â† Chat messages
â”‚   â”‚   â”œâ”€â”€ Notification.tsx â† Toast notifications
â”‚   â”‚   â””â”€â”€ CreateGroupModal.tsx â† Create group dialog
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ websocket.ts    â† WebSocket logic (class-based)
â”‚   â”œâ”€â”€ App.tsx             â† Main app component
â”‚   â”œâ”€â”€ App.css             â† Styles
â”‚   â”œâ”€â”€ main.tsx            â† Entry point
â”‚   â””â”€â”€ types.ts            â† TypeScript types
â”œâ”€â”€ package.json            â† Dependencies
â”œâ”€â”€ tsconfig.json           â† TypeScript config
â””â”€â”€ vite.config.ts          â† Build config
```

### Backend Changes

**Minimal changes to Go backend:**

**File:** `cmd/server/main.go`

```go
// Before:
app.Static("/", "./static")

// After:
app.Static("/", "./client/dist", fiber.Static{...})
app.Static("/", "./static")  // Fallback for old files
```

**That's it!** The WebSocket protocol remains the same.

### Features Preserved

âœ… All features work exactly the same:
- Real-time messaging
- Private chats
- Group chats
- Create/join groups
- Online user list
- Notifications

---

## ğŸ’¡ Important Things to Know

### 1. Two Modes of Development

**Development Mode:**
- Use when writing code
- Hot reload enabled (instant updates)
- Frontend: `http://localhost:3000`
- Backend: `http://localhost:8080`
- No need to rebuild after every change!

**Production Mode:**
- Use for deployment
- Optimized and minified code
- Everything served from: `http://localhost:8080`
- Need to rebuild when code changes

### 2. The `dist/` Folder

**What is it?**
- Generated by `npm run build`
- Contains optimized React app files
- Ready for production deployment


### 3. Hot Reload (Development Mode)

**How it works:**
```
1. Edit file in src/ folder
2. Save (Ctrl + S)
3. Vite detects change
4. Browser updates automatically
5. No manual refresh needed! âš¡
```

### 8. Build Process

**What happens when you run `npm run build`:**

```
1. TypeScript â†’ JavaScript
   (Remove types, compile to JS)

2. Bundle files
   (Combine all files into one)

3. Minify code
   (Remove spaces, shorten names)

4. Optimize
   (Remove unused code, compress)

5. Generate dist/ folder
   (Ready for production!)
```

---

## ğŸ“ File Upload Feature

### Overview

GoTalkie now supports uploading and sharing C/C++ source code files with **syntax highlighting** in both private and group chats!

### Supported File Types

| Extension | Type | Max Size |
|-----------|------|----------|
| .c | C Source | 1MB |
| .cpp, .cc, .cxx | C++ Source | 1MB |
| .h | C/C++ Header | 1MB |
| .hpp | C++ Header | 1MB |


- **Interactive Preview** - View code before sending

- **Line Numbers** - Easy code reference

- **File Info Display** - Name, size, type, line count

- **Group Support** - Share files in group chats


**Code Preview Modal:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ example.c                      [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ C | 2.5 KB | 45 lines               â”‚
â”œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1 â”‚ #include <stdio.h>              â”‚
â”‚ 2 â”‚ int main() {                    â”‚
â”‚ 3 â”‚     printf("Hello!\n");         â”‚
â”‚ 4 â”‚     return 0;                   â”‚
â”‚ 5 â”‚ }                               â”‚
â”œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [Close]  [Send File]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---





